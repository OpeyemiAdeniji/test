name: Update Port with Modified Name
on:
  workflow_dispatch:
    inputs:
        playlistIdoo:
          type: string
      
jobs:
  update_port:
    runs-on: ubuntu-latest
    env:
      PORT_CLIENT_ID: ${{ secrets.PORT_CLIENT_ID }}
      PORT_CLIENT_SECRET: ${{ secrets.PORT_CLIENT_SECRET }}
      GITHUB_TOKEN: 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
      PORT_RUN_ID: ${{ fromJson(inputs.port_context).runId }}

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Create a log message (apply)
        uses: port-labs/port-github-action@v1
        with:
          clientId: ${{ secrets.PORT_CLIENT_ID }}
          clientSecret: ${{ secrets.PORT_CLIENT_SECRET }}
          baseUrl: https://api.getport.io
          operation: PATCH_RUN
          runId: ${{ env.PORT_RUN_ID }}
          logMessage: "Initiating creation of youtube playlist: ${{ inputs.playlistId }}."
